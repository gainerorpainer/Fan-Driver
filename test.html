<div>
  <canvas id="myChart"></canvas>
</div>

<button onclick="UpdateDataPoint()">Update Datapoint</button>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/chartjs-plugin-annotation/2.1.1/chartjs-plugin-annotation.min.js"></script>

<script>
  const ctx = document.getElementById("myChart");

  const data = {
    datasets: [
      {
        label: "Aktuell",
        borderColor: "rgba(0,0,0)",
        pointBorderColor: "rgba(0,0,0)",
        backgroundColor: "rgba(0,0,0)",
        radius: 12,
        pointStyle: "circle",
        data: [
          {
            x: 18.5,
            y: 30,
          },
        ],
        backgroundColor: "rgb(255, 99, 132)",
      },
    ],
  };

  const x_min = 22;
  const y_max = 30;

  const annotations = {
    xMinBox: {
      type: "box",
      backgroundColor: "rgba(255, 100, 100, 0.25)",
      borderWidth: 0,
      xMin: x_min,
      yMin: y_max,
      label: {
        display: true,
        textAlign: "center",
        content: ["0%:", "warmer Raum"],
        position: { x: "start", y: "center" },
        color: "rgba(255, 100, 100)",
      },
    },

    yMinBox: {
      type: "box",
      backgroundColor: "rgba(100, 100, 100, 0.25)",
      borderWidth: 0.25,
      yMax: y_max,
      label: {
        display: true,
        textAlign: "center",
        content: ["0%:", "Heizkörper zu kalt"],
        color: "rgba(100, 100, 100)",
      },
    },

    controlBox: {
      type: "box",
      backgroundColor: "rgba(255, 120, 0, 0.25)",
      borderWidth: 0,
      xMin: x_min - 1,
      xMax: x_min,
      yMin: y_max,
      label: {
        display: true,
        textAlign: "center",
        content: ["100% - 0%", "Regelung"],
        color: "rgba(255, 120, 0)",
      },
    },

    fullPowerBox: {
      type: "box",
      backgroundColor: "rgba(0, 0, 255, 0.25)",
      borderWidth: 0,
      xMax: x_min - 1,
      yMin: y_max,
      label: {
        display: true,
        textAlign: "center",
        content: ["100%:", "kalter Raum"],
        color: "rgba(0, 0, 255)",
      },
    },
  };

  chart = new Chart(ctx, {
    type: "scatter",
    options: {
      scales: {
        x: {
          suggestedMin: 15,
          suggestedMax: 24,
          title: {
            display: true,
            text: "Raum [°C]",
          },
        },
        y: {
          suggestedMin: 15,
          suggestedMax: 50,
          title: {
            display: true,
            text: "Heizkörper [°C]",
          },
        },
      },
      responsive: true,
      plugins: {
        legend: {
          position: "top",
          labels: {
            usePointStyle: true,
          },
        },
        title: {
          display: true,
          text: "Chart.js Scatter Chart",
        },
        annotation: {
          annotations: annotations,
        },
      },
    },
    data: data,
  });

  function UpdateDataPoint() {
    chart.data.datasets[0].data[0].x =
      chart.scales.x.min +
      (chart.scales.x.max - chart.scales.x.min) * Math.random();
    chart.data.datasets[0].data[0].y =
      chart.scales.y.min +
      (chart.scales.y.max - chart.scales.y.min) * Math.random();
    chart.update();
  }
</script>
